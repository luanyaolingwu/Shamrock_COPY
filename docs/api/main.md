# API

请求一个 API 时, 包含了: API 路由名称, 以及 API 所需参数，允许使用POST｜GET。

## 请求与响应

### *使用 HTTP GET*

使用 HTTP GET 请求 API 时, 你需要将参数放在 URL 中, 例如:

| 名称     | 说明                                                                                             |
|--------|------------------------------------------------------------------------------------------------|
| 请求 URL | /路由名称?参数名=参数值&参数名=参数值......                                                                    |
| 补充	    | 使用 GET 虽然简单, 但是你无法传入复杂的数据结构, 所以一些需要嵌套数据的 API 是无法通过 HTTP GET 来调用的, 例如 send_group_forward_msg 接口 |

### *使用 HTTP POST*

| 名称     | 说明                                                              |
|--------|-----------------------------------------------------------------|
| 请求 URL | /路由名称                                                           |
| 请求体    | 请求体可以使用 JSON 也可以使用 Form 表单, 需要注意的是, 请求的 `Content-Type`是一定要设置准确的 |
| 补充     | 同样, 在 POST 中, 如果要使用复杂的 API, 那么也需要使用 JSON 的格式, 表单格式是不支持数据嵌套的     |

### *HTTP POST JSON 格式*
```json
{
    "参数名": "参数值",
    "参数名2": "参数值"
}
```

### *HTTP POST 表单格式*

```urlencoded
param1=value&param2=value
```

### *使用 WebSocket*

| 名称     | 说明                                                                                                          |
|--------|-------------------------------------------------------------------------------------------------------------|
| 请求 URL | 这个其实说的是 websocket 建立连接时的 URL, 你可以连接 / 路径, 也可以连接 /api 路径, 他们的区别是 / 除了用来发送 api 和响应 api, 还提供上报功能               |
| 请求体    | 一个 JSON 数据, 其中包含了请求 API 的路由名称, 以及参数                                                                         |
| 补充     | 在调用 api 时, 你还可以传入 "echo" 字段, 然后响应数据中也会有一个值相同的 "echo" 字段, 可以使用这个方式来甄别 "这个响应是哪个请求发出的", 你可以为每一个请求都使用一个唯一标识符来甄别 |

*WebSocket JSON 格式*

```json
{
    "action": "路由名称, 例如 'send_group_msg'",
    "params": {
        "参数名": "参数值",
        "参数名2": "参数值"
    },
    "echo": "'回声', 如果指定了 echo 字段, 那么响应包也会同时包含一个 echo 字段, 它们会有相同的值"
}
```

## 响应说明

使用 HTTP 调用 API 的时候, HTTP 的响应状态码:

| 值   | 说明                                        |
|-----|-------------------------------------------|
| 403 | access token 不符合                          |
| 404 | 路由 不存在                                    |
| 200 | 除上述情况外所有情况 (具体 API 调用是否成功, 需要看 API 的 响应数据 |

API 的响应是一个 JSON 数据, 如下:

```json
{
    "status": "状态, 表示 API 是否调用成功, 如果成功, 则是 OK, 其他的在下面会说明",
    "retcode": 0,
    "msg": "错误消息, 仅在 API 调用失败时有该字段",
    "wording": "对错误的详细解释(中文), 仅在 API 调用失败时有该字段",
    "data": {
        "响应数据名": "数据值",
        "响应数据名2": "数据值",
    },
    "echo": "'回声', 如果请求时指定了 echo, 那么响应也会包含 echo"
}
```

其中, `status` 字段:

| 值      | 说明       |
|--------|----------|
| ok     | api 调用成功 |
| failed | api 调用失败 |

# 账号相关

## 获取登录号信息

### 路由名称

`POST｜GET /get_account_info`

响应数据

| 名称      | 类型       | 解释   |
|---------|----------|------|
| uin     | `int64`  | QQ   |
| isLogin | `bool`   | 是否登陆 |
| nick    | `string` | 昵称   |

## 设置 QQ 个人资料

该接口用于设置 QQ 用户的个人资料信息。

### 路由名称

`POST｜GET /set_qq_profile`

### 参数

| 参数名           | 类型     | 必需  | 说明                |
|---------------|--------|-----|-------------------|
| nickname      | string | 是   | 昵称                |
| company       | string | 是   | 公司                |
| email         | string | 是   | 邮箱                |
| college       | string | 是   | 大学                |
| personal_note | string | 是   | 个人备注              |
| age           | int    | 否   | 年龄                |
| birthday      | string | 否   | 生日（格式：YYYY-MM-DD） |

### 响应

该接口将返回处理结果。

## 获取在线机型

该接口用于获取可设置的在线机型的其他类型。

### 路由名称

`POST｜GET /_get_model_show`

### 参数

| 参数名   | 类型     | 必需  | 说明  |
|-------|--------|-----|-----|
| model | string | 是   | 机型  |

### 响应

```json
{
  "status": "ok",
  "retcode": 0,
  "data": {
    "variants": [
      {
        "model_show": "iPhone11,1 (黑色)",
        "need_pay": true
      },
      {
        "model_show": "iPhone11,1 (白色)",
        "need_pay": true
      },
      {
        "model_show": "iPhone11,1 (银色)",
        "need_pay": true
      },
      {
        "model_show": "iPhone11,1 (灰色)",
        "need_pay": true
      },
      {
        "model_show": "iPhone11,1 (金色)",
        "need_pay": true
      },
      {
        "model_show": "iPhone11,1",
        "need_pay": false
      }
    ]
  }
}
```

## 设置在线机型

该接口用于设置在线机型。

### 路由名称

`POST｜GET /_set_model_show`

### 参数

| 参数名   | 类型     | 必需  | 说明  |
|-------|--------|-----|-----|
| model | string | 是   | 机型  |

### 响应

该接口将返回处理结果。

## 获取当前账号在线客户端列表

该接口用于获取当前账号在线客户端列表。

### 路由名称

`POST｜GET /get_online_clients`

### 响应



